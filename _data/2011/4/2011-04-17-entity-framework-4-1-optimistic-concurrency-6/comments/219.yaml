id: 219
author:
  name: tjsoftware
  url: http://tjs87.wordpress.com
date: 2011-08-19T12:40:43.0000000-04:00
content: "Hi, and thanks for your helpful article. I have created my own ORM by deriving from DbContext, and I am a newbie to this. I have an article class and comment class with following definition :\n\npublic partial class Article\n    {\n        public int ArticleID { get; set; }\n\n       //other properties\n       \n    public virtual ICollection Comments { get; set; } \n}\n\npublic partial class Comment\n    {\n\n        public int CommentID { get; set; }\n\n      //other proprties\n\n       public virtual Article Article { get; set; }\n\n}\n\nBut when I want to delete some article and its associated comments by using following code, I got this error \"Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries.\" \n\n               var qry=from c in _articleRepo.GetArticleByID(id).Comments\n                            select c;\n\n                foreach (var item in qry)\n                {\n                    _commentRepo.DeleteComment(item.CommentID);\n\n                    _commentRepo.Save();\n                }\n\n                _articleRepo.DeleteArticle(id);\n\n                _articleRepo.Save();\n\nwould you please help me ?"
