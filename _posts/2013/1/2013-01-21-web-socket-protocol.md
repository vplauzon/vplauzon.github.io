---
title: Web Socket Protocol
date: 2013-01-21 20:00:00 -05:00
permalink: /2013/01/21/web-socket-protocol/
categories:
- Solution
tags:
- Web
---
<p>Web Socket is a new protocol, standardised in <a href="http://tools.ietf.org/html/rfc6455">RFC 6455</a>, attempting to bring the best features of HTTP &amp; TCP together.&#160; More specifically, it aims at being Connected &amp; full-duplex (as TCP), allowing server to call-back clients and universal (as HTTP).</p>  <p>This wasn’t done without pain.&#160; Web Socket has a non-trivial handshake process, done over HTTP, after which the underlying TCP connection is used.&#160; The handshake involves exchanging a key.&#160; The key exchange ensures Server &amp; Client are aware of the Web Socket Protocol.&#160; It also makes the protocol much harder to implement in your beloved garage.</p>  <p>Web Socket provides a packet-framing Data Transfer protocol after the exchange.&#160; This allows both servers &amp; clients to exchange data in a predefined way with low-overhead.</p>  <p>Web Socket is aiming at replacing long pooling in rich web sites, thus allowing Servers to update client in real time in an efficient manner.</p>  <p>I’m a little sceptical about that protocol.&#160; Beside the Byzantine aspect of handshake (designed to fool intermediary to believe Web Socket is just HTTP, hence not requiring any Routers on Earth to be updated for the protocol to work), I question its scalability.&#160; We need servers to keep TCP connection with clients.&#160; What happen if the server fails?&#160; How do we load-balance?&#160; The beauty of the HTTP protocol is that it was connection-less hence client-server interaction were bound in time which allows us to make a lot of things, for instance, load balancing requests on a web server farm.&#160; With Web Socket, it seems that we become stateful.</p>  <p>What we really need to fix the long pooling problem is a way for a server to establish a connection with a client.&#160; Because this is impossible in most cases due to firewall rules, we come up with a complicated mechanism approximating the behaviour we want and bringing challenges with it.</p>  <p>This is another instance of the sclerosis of Internet:&#160; the inability for the Internet to fundamentally evolve beyond its 1995 design.&#160; IPv6 anyone?</p>  <p>Ok, this rant aside, Web Socket is a well thought-through protocol supported by both Windows 8 &amp; IIS.&#160; It works.</p>  <p>&#160;</p>  <p>You can find a very good description of the protocol and its implementation in Windows 8 in <a href="http://kennykerr.ca/">Kenny Kerr</a>’s <a href="http://msdn.microsoft.com/en-us/magazine/jj863133.aspx">MSDN article</a>.</p>