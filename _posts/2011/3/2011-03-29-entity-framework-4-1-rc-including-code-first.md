---
title:  Entity Framework 4.1 RC:  Including Code-First
date:  03/30/2011 00:22:00
permalink:  "/2011/03/29/entity-framework-4-1-rc-including-code-first/"
categories:
- Solution
tags:
- .NET
---
<p>Microsoft has published the first release candidate of Entity Framework 4.1.&#160; This new release includes the very popular <em>Code First</em> feature, allowing to model your data in the code, without any designer tools.</p>  <p>With this Release Candidate comes a <a href="http://weblogs.asp.net/scottgu/archive/2011/03/19/rc-of-entity-framework-4-1-which-includes-ef-code-first.aspx">promise</a>:&#160; the final release will come within the next 4 weeks and will be %100 compatible with the current RC.</p>  <p>If you’ve read my <a href="http://vincentlauzon.wordpress.com/2010/11/12/entity-framework-4-0-poco-or-poco/">blog post about EF POCO capability</a>, you’ve seen that Entity Framework currently lacks support for a clean class model, i.e. a set of classes representing your data but totally freed of dependencies to the Entity Framework (via base classes, attributes, etc.).</p>  <p>With Entity Framework 4.1, this changes.&#160; We can now model classes in a POCO fashion and the Entity Framework will map to them.</p>  <p>You can find a simple walkthrough at <a href="http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-code-first-walkthrough.aspx">this blog post</a>, so I won’t repeat it here.</p>  <p>I’ve just started to toy around with the RC.&#160; So far I find it pretty neat.&#160; The fluent API has a very natural feel for configuring different mapping.</p>  <p>The lack of documentation is quite painful at this point.&#160; But hey!&#160; If you’re an early adopter, you’re used to navigate blog posts talking about outdated versions of the CTP and using a lot of reflection!</p>  <p>A big feature of this RC is the ability to generate the database out of the model.&#160; I found it pretty limited since EF 4.1 doesn’t include any support for ‘migration’, i.e. the capacity of adapting the database following a change in the class model.&#160; Microsoft is <a href="http://blogs.msdn.com/b/efdesign/archive/2010/10/22/code-first-database-evolution-aka-migrations.aspx">working on it though</a> and this should be available in a future release.&#160; I’m not a huge fan of generating a database out of a class model (simply because it’s impractical in any Enterprise).&#160; In order to make it work properly, you would need to decorate your model with attributes from <em>System.ComponentModel.DataAnnotations</em> namespace, otherwise the conventions will null all non-PK/FK columns and assume ‘standard’ string-size (128).&#160; This doesn’t bring a dependency to EF directly, but it does charge your model with distraction, although the added ‘richness’ can then be used for validation.</p>  <p>My next step is to look into mapping inheritance into the data model.</p>