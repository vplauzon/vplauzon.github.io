---
title: Azure Active Directory Labs Series – Adding Claims
date: 2016-09-07 19:00:25 -04:00
permalink: /2016/09/07/azure-active-directory-labs-series-adding-claims/
categories:
- Solution
tags:
- Identity
---
<strike></strike> <p>Back in June I had the pleasure of delivering a training on Azure Active Directory to two customer crowds.&nbsp; I say pleasure because not only do I love to share knowledge but also, the preparation of the training forces me to go deep on some aspects of what I’m going to teach.  </p><p>In that training there were 8 labs and I thought it would be great to share them to the more general public.&nbsp; The labs follow each other and build on each other.  </p><p>You can find the exhaustive list in <a href="https://vincentlauzon.com/subject-series/cloud-identity-azure-active-directory/">Cloud Identity &amp; Azure Active Directory</a> page.&nbsp; This is the fourth lab.  </p><p>In the current lab we configure Azure AD application to emit more claims in the authentication token.  <h2>Download the application manifest</h2> <ol> <li>Go to the legacy portal @ <a href="https://manage.windowsazure.com">https://manage.windowsazure.com</a> </li> <li>Scroll down the left menu to the bottom and select <i>Active Directory</i><br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image002.jpg"><img title="clip_image002" style="background-image:none;padding-top:0;padding-left:0;display:inline;padding-right:0;border-width:0;" border="0" alt="clip_image002" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image002_thumb.jpg" width="161" height="165" /></a> </li> <li>You should see the following screen<br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image004.jpg"><img title="clip_image004" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image004" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image004_thumb.jpg" width="531" height="102" /></a> </li> <li>Select a tenant you created for this lab &amp; enter it<br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image006.jpg"><img title="clip_image006" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image006" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image006_thumb.jpg" width="566" height="56" /></a> </li> <li>Select the <i>Applications</i> sub menu<br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image008.jpg"><img title="clip_image008" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image008" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image008_thumb.jpg" width="240" height="37" /></a> </li> <li>Select the application you’ve created in a previous lab (i.e. <i>WebDemo</i>) </li> <li>At the bottom of the screen, click the <i>Manage Manifest</i> button<br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image009.png"><img title="clip_image009" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image009" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image009_thumb.png" width="665" height="119" /></a> </li> <li>In the sub menu, click <i>Download Manifest</i> </li> <li>In the dialog box, click <i>Download Manifest</i> </li> <li>Look for the downloaded file, in your download folder, it should have the file name <i>&lt;application’s client ID&gt;.json</i> </li></ol> <h2>Modify the manifest</h2> <ol> <li>Open the manifest json file into an editor (e.g. Visual Studio) </li> <li>Find the property “<i>groupMembershipClaims</i>” (around line 7<sup>th</sup>) </li> <li>Replace <i>null</i> by “<i>SecurityGroup</i>” </li> <li>Save the file </li></ol> <h2>Upload the manifest</h2> <ol> <li>Back in the portal click again on the <i>Manage Manifest</i> button<br /><a href="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image0091.png"><img title="clip_image009[1]" style="border-top:0;border-right:0;background-image:none;border-bottom:0;padding-top:0;padding-left:0;border-left:0;display:inline;padding-right:0;" border="0" alt="clip_image009[1]" src="/assets/2016/9/azure-active-directory-labs-series-adding-claims/clip_image0091_thumb.png" width="665" height="119" /></a> </li> <li>In the sub menu, click <i>Upload Manifest</i> </li> <li>Browse for the file on your disk </li> <li>Click the check button </li></ol> <h2>Test Web App</h2> </p><p>If you test the Web App (deployed in a previous lab), you should see that you have new claims of type “groups” with the unique identifier of the groups the user is member of as value.  <h2>Post Lab</h2> </p><p>None</p>